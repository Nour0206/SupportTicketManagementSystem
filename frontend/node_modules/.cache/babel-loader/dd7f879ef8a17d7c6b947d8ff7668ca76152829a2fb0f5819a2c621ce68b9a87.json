{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\benmo\\\\Downloads\\\\SupportTicketManagementSystem\\\\frontend\\\\src\\\\pages\\\\Ticket.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect } from 'react';\nimport Modal from 'react-modal';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { BackButton } from '../components/BackButton';\nimport Spinner from '../components/Spinner';\nimport { getTicket } from '../features/tickets/ticketSlice';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst getStatusText = status => {\n  switch (status) {\n    case 0:\n      return 'Open';\n    case 1:\n      return 'In Progress';\n    case 2:\n      return 'Closed';\n    default:\n      return 'Unknown';\n  }\n};\nModal.setAppElement('#root');\nfunction Ticket() {\n  _s();\n  const {\n    ticket,\n    isLoading,\n    isError,\n    message\n  } = useSelector(state => state.tickets);\n  const {\n    user\n  } = useSelector(state => state.auth); // Get user from state\n\n  const {\n    id: ticketId\n  } = useParams(); // Ensure ticketId is correctly retrieved\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  useEffect(() => {\n    if (isError) {\n      toast.error(message);\n    }\n    if (ticketId) {\n      dispatch(getTicket(ticketId));\n    }\n  }, [isError, message, ticketId, dispatch]);\n  const onTicketClose = () => {\n    if (ticketId) {\n      navigate('/tickets');\n    } else {\n      toast.error('Ticket ID is undefined');\n    }\n  };\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 12\n    }, this);\n  }\n  if (isError) {\n    return /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Something went wrong\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 12\n    }, this);\n  }\n  const getBackButtonUrl = () => {\n    if (user.role === 'admin') return '/tickets';\n    if (user.role === 'agent') return '/ticketsAgent';\n    return '/ticketsUser';\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"ticket-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"ticket-header\",\n      children: [/*#__PURE__*/_jsxDEV(BackButton, {\n        url: getBackButtonUrl()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Ticket Name: \", ticket.name, /*#__PURE__*/_jsxDEV(\"span\", {\n          className: `status status-${ticket.status}`,\n          children: getStatusText(ticket.status)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this), ' ']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Date submitted: \", new Date(ticket.createdAt).toLocaleString('en-US')]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Ticket ID: \", ticket._id]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ticket-desc\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Description of issue\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: ticket.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), ticket.status !== 'closed' && /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-block btn-danger\",\n      onClick: onTicketClose,\n      children: \"Close Ticket\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n}\n_s(Ticket, \"n9ClKc9R/IdAO6NPmkytr3Ofgzk=\", false, function () {\n  return [useSelector, useSelector, useParams, useDispatch, useNavigate];\n});\n_c = Ticket;\nexport default Ticket;\nvar _c;\n$RefreshReg$(_c, \"Ticket\");","map":{"version":3,"names":["useEffect","Modal","useDispatch","useSelector","useNavigate","useParams","toast","BackButton","Spinner","getTicket","jsxDEV","_jsxDEV","getStatusText","status","setAppElement","Ticket","_s","ticket","isLoading","isError","message","state","tickets","user","auth","id","ticketId","dispatch","navigate","error","onTicketClose","fileName","_jsxFileName","lineNumber","columnNumber","children","getBackButtonUrl","role","className","url","name","Date","createdAt","toLocaleString","_id","content","onClick","_c","$RefreshReg$"],"sources":["C:/Users/benmo/Downloads/SupportTicketManagementSystem/frontend/src/pages/Ticket.jsx"],"sourcesContent":["import { useEffect } from 'react'\nimport Modal from 'react-modal'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { useNavigate, useParams } from 'react-router-dom'\nimport { toast } from 'react-toastify'\nimport { BackButton } from '../components/BackButton'\nimport Spinner from '../components/Spinner'\nimport { getTicket } from '../features/tickets/ticketSlice'\n\nconst getStatusText = (status) => {\n  switch (status) {\n    case 0:\n      return 'Open'\n    case 1:\n      return 'In Progress'\n    case 2:\n      return 'Closed'\n    default:\n      return 'Unknown'\n  }\n}\nModal.setAppElement('#root')\n\nfunction Ticket() {\n  const { ticket, isLoading, isError, message } = useSelector(\n    (state) => state.tickets\n  )\n  const { user } = useSelector((state) => state.auth) // Get user from state\n\n  const { id: ticketId } = useParams() // Ensure ticketId is correctly retrieved\n  const dispatch = useDispatch()\n  const navigate = useNavigate()\n\n  useEffect(() => {\n    if (isError) {\n      toast.error(message)\n    }\n    if (ticketId) {\n      dispatch(getTicket(ticketId))\n    }\n  }, [isError, message, ticketId, dispatch])\n\n  const onTicketClose = () => {\n    if (ticketId) {\n      navigate('/tickets')\n    } else {\n      toast.error('Ticket ID is undefined')\n    }\n  }\n\n  if (isLoading) {\n    return <Spinner />\n  }\n\n  if (isError) {\n    return <h3>Something went wrong</h3>\n  }\n\n  const getBackButtonUrl = () => {\n    if (user.role === 'admin') return '/tickets'\n    if (user.role === 'agent') return '/ticketsAgent'\n    return '/ticketsUser'\n  }\n\n  return (\n    <div className='ticket-page'>\n      <header className='ticket-header'>\n        <BackButton url={getBackButtonUrl()} />\n        <h2>\n          Ticket Name: {ticket.name}\n          <span className={`status status-${ticket.status}`}>\n            {getStatusText(ticket.status)}\n          </span>{' '}\n        </h2>\n        <h3>\n          Date submitted: {new Date(ticket.createdAt).toLocaleString('en-US')}\n        </h3>\n        <h3>Ticket ID: {ticket._id}</h3>\n        <hr />\n        <div className='ticket-desc'>\n          <h3>Description of issue</h3>\n          <p>{ticket.content}</p>\n        </div>\n      </header>\n      {ticket.status !== 'closed' && (\n        <button className='btn btn-block btn-danger' onClick={onTicketClose}>\n          Close Ticket\n        </button>\n      )}\n    </div>\n  )\n}\n\nexport default Ticket\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}